(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{628:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(4942),o=n(5222),c=n(3324),i=n(9977);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={border:"1px solid",borderColor:"gray.200",backgroundColor:"white",display:"flex",alignItems:"center",overflow:"hidden","> img":{width:"100%"}};function d(e){var t=e.address,n=void 0===t?"":t,r=e.src,a=e.seed,d=e.sxStyles,u=void 0===d?{}:d,p=e.lg,f=e.flowAccountAddress,h=e.avatarUrl,g=p?65:50,b=o.withPrefix(n),v=b===o.withPrefix(f),m=v?"/settings.svg":function(e,t){return encodeURI("".concat(e,"avatar/").concat(t,".svg"))}(h,"".concat(b,"-").concat(a));return(0,i.tZ)("div",{sx:s(s(s({},l),u),{},{width:g,height:g,borderRadius:g,border:v?0:u.border||l.border}),children:(0,i.tZ)(c.Img,{src:[r||m,"/missing-avatar-icon.svg"]})})}},4528:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(9977),o={image:{borderRadius:65,width:65}};function c(e){var t=e.icon,n=t||"/missing-app-icon.svg";return(0,r.tZ)("img",{src:n,sx:o.image,title:t?void 0:"Missing app icon"})}},8937:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ge}});var r=n(5861),o=n(7757),c=n.n(o),i=n(4942),a=n(8728),s=n(9145),l=n(9977);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.onClick,n=e.defaultChecked,r=void 0!==n&&n,o=e.variant,c=void 0===o?"primary":o,i=e.size,d=void 0===i?"lg":i,p=e.sx,f=void 0===p?{}:p,h=e.id,g=void 0===h?"":h,b=(0,a.Z)(["forms.switch.".concat(c),"forms.switch.sizes.".concat(d)]);return(0,l.tZ)(s.rs,{onClick:t,defaultChecked:r,sx:u(u({},f),b),id:g,role:"switch"})},f=n(7294),h=n(5222);var g=n(1451),b=n(6060),v=n(1752),m=n(8869),y=n(2390),x=n(3848),w=n.n(x),A=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function O(e){var t=new(w())(A);return"Account ".concat(t.nameForId(e))}var Z=n(6012),S=n(8459),j=n(6917),C=n(6879),k=n(8764).Buffer,P=(0,v.default)().publicRuntimeConfig;function B(){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.send([h.getAccount(P.flowAccountAddress)]).then(h.decode);case 3:if(!e.sent.contracts.FCL){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function I(){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(c().mark((function e(){var t,n,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,C.Z)(P.flowAccessNode,P.flowAccountAddress,P.contractFungibleToken,P.contractFlowToken,P.contractFUSD),e.next=3,B();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return t=(0,g.Z)(Array(P.flowInitAccountsNo)).map((function(e,t){return O(t)})),n=[S.Fw].concat((0,g.Z)(t)),e.next=10,(0,Z.w)(P.flowAccountAddress,P.flowAccountKeyId,P.flowAccountPrivateKey);case 10:return r=e.sent,e.next=13,h.send([h.transaction(y),h.args([h.arg(k.from(m,"utf8").toString("hex"),b.String),h.arg((0,j.n)(P.flowAccountPublicKey),b.String),h.arg(n,b.Array(b.String))]),h.proposer(r),h.payer(r),h.authorizations([r]),h.limit(200)]).then(h.decode);case 13:return o=e.sent,e.next=16,h.tx(o).onceSealed();case 16:h.account(P.flowAccountAddress).then((function(e){console.log("ACCOUNT",Object.keys(e.contracts))}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=n(5893),E=(0,f.createContext)({connectedAppConfig:{},appScopes:[],initError:null});function F(e){var t=e.children,n=(0,f.useState)(!1),o=n[0],i=n[1],a=(0,f.useState)(null),s=a[0],l=a[1],d=function(){var e,t,n,r,o,c=(0,f.useState)(null),i=c[0],a=c[1];return(0,f.useEffect)((function(){h.WalletUtils.ready((function(e){a(e)}))}),[]),{connectedAppConfig:i,appScopes:null!==(e=null===i||void 0===i||null===(t=i.config)||void 0===t||null===(n=t.services)||void 0===n||null===(r=n["OpenID.scopes"])||void 0===r||null===(o=r.trim())||void 0===o?void 0:o.split(/\s+/))&&void 0!==e?e:[]}}(),u=d.connectedAppConfig,p=d.appScopes;if((0,f.useEffect)((function(){function e(){return(e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:i(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("Dev wallet initialization failed: ".concat(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!o||!u)return null;var g={connectedAppConfig:u,appScopes:p,initError:s};return(0,L.jsx)(E.Provider,{value:g,children:t})}var R=function(){return(0,f.useContext)(E)},z=n(9034);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={headingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},heading:{textTransform:"uppercase",color:"gray.400",fontWeight:"normal",fontSize:0,letterSpacing:"0.05em"}};function N(e){var t=e.compact,n=e.children;return(0,l.tZ)("div",{sx:U(U({},T.headingContainer),{},{height:t?30:40}),children:(0,l.tZ)("div",{sx:T.heading,children:n})})}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={headingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},heading:{textTransform:"uppercase",color:"gray.400",fontWeight:"normal",fontSize:0,letterSpacing:"0.05em"},label:{textTransform:"capitalize",margin:0},scope:{height:40,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"gray.200"}};function K(e){var t=e.scopes,n=e.setScopes,r=e.compact,o=void 0!==r&&r,c=R().appScopes;return(0,l.BX)("div",{id:"scopes",children:[(0,l.tZ)(N,{compact:o,children:c.length>0&&"Scopes"}),c.length>0&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(z.Ge.hr,{sx:{backgroundColor:"gray.400",mt:0,mb:o?1:3}}),c.map((function(e){return(0,l.tZ)("div",{children:(0,l.BX)("div",{sx:M(M({},H.scope),{},{paddingBottom:o?1:3}),children:[(0,l.tZ)(s.__,{htmlFor:"scope-".concat(e),sx:H.label,children:e}),(0,l.tZ)("div",{sx:{display:"inline-flex"},children:(0,l.tZ)(p,{size:"lg",id:"scope-".concat(e),defaultChecked:t.has(e),onClick:function(){return function(e){t.has(e)?t.delete(e):t.add(e),n(t)}(e)},"aria-checked":"true"})})]})},e)}))]})]})}var q=n(628),G=n(743).B7;var V=function(e){var t=e.active,n=G().theme;return(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"none",viewBox:"0 0 22 22",children:(0,L.jsx)("path",{stroke:t?n.colors.green:n.colors.gray[500],strokeLinecap:"round",strokeLinejoin:"round",d:"M11 21c5.523 0 10-4.477 10-10S16.523 1 11 1 1 5.477 1 11s4.477 10 10 10zM11 15v-4M11 7v-.5"})})},Y=n(4528),J={container:{textAlign:"center",position:"relative"},info:{textAlign:"left",fontSize:1,color:"textMedium",marginTop:-2},infoLabel:{opacity:.8},imageContainer:{width:65,height:65,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",margin:"0 auto"},title:{marginTop:3,marginBottom:2},image:{borderRadius:65,width:65},description:{maxWidth:340,margin:"0 auto"},externalAddressLink:{ml:1,color:"blue",fontSize:1},externalLinkImage:{ml:2,position:"relative",top:"1px"},infoButton:{position:"absolute",right:0,display:"flex",alignItems:"center",justifyContent:"center"},missingAppDetail:{color:"red.200",display:"inline-flex",alignItems:"center"}};function Q(e){var t=e.text;return(0,l.BX)("div",{sx:J.missingAppDetail,children:[t,(0,l.tZ)(s.rU,{href:"https://docs.onflow.org/fcl/api/#common-configuration-keys",target:"_blank",sx:{ml:1,color:"blue"},children:"Learn More"})]})}function $(e){var t=e.title,n=e.description,r=e.info,o=void 0===r||r,c=e.account,i=e.flowAccountAddress,a=e.avatarUrl,d=(0,f.useState)(!1),u=d[0],p=d[1],h=R().connectedAppConfig.config.app,g=h.icon,b=h.title;return(0,l.BX)("div",{sx:J.container,children:[o&&(0,l.tZ)("div",{id:"info",children:u&&(0,l.BX)("div",{sx:J.info,children:[(0,l.BX)("div",{children:[(0,l.tZ)("span",{sx:J.infoLabel,children:"app.detail.icon:"})," ",g||(0,l.tZ)(Q,{text:"Missing, please include an icon."})]}),(0,l.BX)("div",{children:[(0,l.tZ)("span",{sx:J.infoLabel,children:"app.detail.title:"})," ",b||(0,l.tZ)(Q,{text:"Untitled, please include a title."})]}),(0,l.tZ)(z.Ge.hr,{})]})}),(0,l.BX)("div",{children:[o&&(0,l.tZ)(s.zx,{variant:"unstyled",sx:J.infoButton,onClick:function(){return p((function(e){return!e}))},"aria-controls":"info","aria-expanded":u,children:(0,l.tZ)(V,{active:u})}),(0,l.tZ)("div",{sx:J.imageContainer,children:null!==c&&void 0!==c&&c.address?(0,l.tZ)(q.Z,{address:c.address,seed:b,lg:!0,flowAccountAddress:i,avatarUrl:a}):(0,l.tZ)(Y.Z,{icon:g})}),(0,l.tZ)(z.Ge.h1,{sx:J.title,children:t||b||S.jQ}),!!n&&(0,l.tZ)(z.Ge.p,{sx:J.description,children:n})]})]})}var ee=n(4024),te=function(e){var t=e.children;return(0,l.tZ)("div",{sx:{border:"1px solid",borderColor:"red.200",backgroundColor:"red.100",borderBottomLeftRadius:4,borderBottomRightRadius:4,color:"red.200",marginTop:"-1px",px:"20px",py:3,"> a":{color:"red.200"}},children:t})};function ne(e){var t=e.errors;return(0,l.tZ)(s.xu,{mt:3,mb:4,children:(0,l.tZ)(te,{children:t.join(". ")})})}var re=n(2580),oe=n(4401),ce=n(4231),ie={label:ce.Z_().required(S.HN)},ae=ce.Ry().shape(ie);function se(e){var t=(0,f.useState)(null),n=t[0],r=t[1],o=(0,f.useState)(null),c=o[0],i=o[1],a=(0,f.useState)(!0),s=a[0],l=a[1];return(0,oe.D0)(e).then((function(e){r(e)})).catch((function(e){i(e)})).finally((function(){return l(!1)})),{data:n,error:c,isLoading:s}}var le=n(2515);var de=n(6854);function ue(e){if(0===e.length)return"0";var t=e.split("."),n=(0,de.Z)(t,2),r=n[0],o=n[1];return[parseFloat(r).toLocaleString("en-US"),null===o||void 0===o?void 0:o.replace(/0+$/,"")].filter(Boolean).join(".")}var pe=n(1226),fe={label:{textTransform:"capitalize",margin:0,marginRight:"auto"},accountSection:{height:50,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"gray.200"},balance:{fontSize:1},fundButton:{fontWeight:"bold",fontSize:0,color:"black",ml:4,px:30,py:"7px",borderColor:"gray.200"}};function he(e){var t=e.address,n=e.flowAccountAddress,r=function(e){var t=(0,le.ZP)(S.Hb.apiAccountFUSDBalance(e)),n=t.data,r=t.error;return{data:parseFloat(n),error:r,isLoading:!n&&!r}}(t).data,o=se(t).data,c=h.withPrefix(t)===h.withPrefix(n),i=function(e){fetch(S.Hb.apiAccountFund(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return e.json()})).catch((function(e){console.error(e)}))};return(0,l.BX)(l.HY,{children:[(0,l.tZ)(N,{compact:!0,children:"Funds"}),(0,l.tZ)(z.Ge.hr,{sx:{backgroundColor:"gray.400",m:0}}),(0,l.BX)("div",{sx:fe.accountSection,children:[(0,l.tZ)(s.__,{sx:fe.label,children:"FLOW"}),(0,l.tZ)("div",{sx:fe.balance,children:null!==o&&void 0!==o&&o.balance?ue(o.balance):"0"}),!c&&(0,l.tZ)(pe.Z,{variant:"ghost",size:"xs",onClick:function(){return i(S.qX)},sx:fe.fundButton,type:"button",children:"Fund"})]}),(0,l.BX)("div",{sx:fe.accountSection,children:[(0,l.tZ)(s.__,{sx:fe.label,children:"FUSD"}),(0,l.tZ)("div",{sx:fe.balance,children:ue(r.toString())}),!c&&(0,l.tZ)(pe.Z,{variant:"ghost",size:"xs",onClick:function(){return i(S.JA)},sx:fe.fundButton,type:"button",children:"Fund"})]})]})}var ge={actionsContainer:{display:"flex",alignItems:"center",width:"100%",borderTop:"1px solid",borderColor:"gray.200",backgroundColor:"white",borderBottomLeftRadius:10,borderBottomRightRadius:10,px:[10,20]},actions:{display:"flex",flex:1,pt:20,pb:20}};var be=function(e){var t=e.account,n=e.onCancel,r=(0,re.u6)(),o=r.isSubmitting,c=r.isValid,i=r.submitForm;return(0,l.tZ)("div",{sx:ge.actionsContainer,children:(0,l.BX)("div",{sx:ge.actions,children:[(0,l.tZ)(pe.Z,{onClick:n,type:"button",variant:"ghost",block:!0,size:"lg",sx:{flex:1,mr:10,w:"50%"},children:"Cancel"}),(0,l.tZ)(pe.Z,{type:"button",block:!0,size:"lg",sx:{flex:1,ml:10,w:"50%"},disabled:o||!c,onClick:i,children:t.address?"Save":"Create"})]})})},ve=n(91),me=["required","children"];function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we={required:{color:"red.200",fontWeight:"normal"}},Ae=function(e){var t=e.required,n=void 0!==t&&t,r=e.children,o=(0,ve.Z)(e,me);return(0,l.BX)(s.__,xe(xe({},o),{},{children:[r,n&&(0,l.tZ)("div",{sx:we.required,children:"*"})]}))},Oe=["field","form","inputLabel","required","sx"];function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je={border:"1px solid",borderColor:"red.200",color:"red.200",outlineColor:"red.200",borderBottomLeftRadius:0,borderBottomRightRadius:0,"&:focus, &:focus-visible":{outline:"none",boxShadow:function(e){var t;return"inset 0 0 0 1pt ".concat(null!==(t=e.colors)&&void 0!==t&&t.red?["200"]:"")},borderBottomLeftRadius:0,borderBottomRightRadius:0}},Ce=function(e){var t=e.field,n=e.form,r=n.touched,o=n.errors,c=e.inputLabel,i=e.required,a=void 0!==i&&i,d=e.sx,u=void 0===d?{}:d,p=(0,ve.Z)(e,Oe),f=r[t.name]&&o[t.name];return(0,l.BX)(l.HY,{children:[(0,l.tZ)(Ae,{required:a,children:c}),(0,l.tZ)(s.II,Se(Se(Se({width:"100%"},t),p),{},{sx:f?Se(Se({},u),je):u})),f&&(0,l.tZ)(te,{children:o[t.name]})]})},ke={form:{position:"relative"},backButton:{background:"none",border:0,position:"absolute",top:0,left:0,cursor:"pointer",p:0,zIndex:10}};function Pe(e){var t=e.account,n=e.onSubmitComplete,o=e.onCancel,i=e.flowAccountAddress,a=e.avatarUrl,d=(0,f.useState)([]),u=d[0],p=d[1];return(0,l.tZ)(re.J9,{initialValues:{label:t.label,scopes:new Set(t.scopes)},validationSchema:ae,onSubmit:function(){var e=(0,r.Z)(c().mark((function e(r,o){var i,a,s,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.label,a=r.scopes,s=o.setSubmitting,p([]),l=Array.from(a),e.prev=4,!t.address){e.next=12;break}return e.next=8,(0,oe.sG)(t.address,i,l);case 8:s(!1),n(void 0),e.next=17;break;case 12:return e.next=14,(0,oe.d2)(i,l);case 14:d=e.sent,s(!1),n(d);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),s(!1);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var n=e.values,r=e.setFieldValue;return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{sx:ee.W.body,children:(0,l.BX)(re.l0,{sx:ke.form,children:[(0,l.tZ)(pe.Z,{onClick:o,sx:ke.backButton,children:(0,l.tZ)("img",{src:"/back-arrow.svg"})}),(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)($,{info:!1,account:t,title:t.address?"Manage Account":"Create New Account",description:t.address,flowAccountAddress:i,avatarUrl:a})}),(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(re.gN,{component:Ce,inputLabel:"Label",name:"label",placeholder:"Account label",required:!0})}),!!t.address&&(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(he,{address:t.address,flowAccountAddress:i})}),(0,l.tZ)(s.xu,{mb:5,children:(0,l.tZ)(K,{scopes:n.scopes,setScopes:function(e){return r("scopes",e)},compact:!0})}),u.length>0&&(0,l.tZ)(ne,{errors:u})]})}),(0,l.tZ)("div",{sx:ee.W.footer,children:(0,l.tZ)(be,{account:t,onCancel:o})})]})}})}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=new Set("name family_name given_name middle_name nickname preferred_username profile picture website gender birthday zoneinfo locale updated_at".trim().split(/\s+/)),De=new Set("email email_verified".trim().split(/\s+/)),Le=function(e,t){return new Set((0,g.Z)(e).filter((function(e){return t.has(e)})))};function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[e].flatMap((function(e){return e})).filter(Boolean);return Object.fromEntries(t)}var Fe=function(e,t,n){return e.has(t)&&[t,n]};function Re(e,t,n,r,o){return{addr:t,keyId:n,signature:(0,j.X)(e,h.WalletUtils.encodeMessageForProvableAuthnSigning(t,r,o))}}function ze(){return(ze=(0,r.Z)(c().mark((function e(t,n,r,o){var i,a,s,l,d,u,p,f,g,b,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.address,s=n.keyId,l=o.body,d=l.timestamp,u=l.appDomainTag,p=Re("",a,s,d,u),f=p.addr,g=p.signature,b=new h.WalletUtils.CompositeSignature(f,s,g),v=[{f_type:"Service",f_vsn:"1.0.0",type:"authn",uid:"fcl-dev-wallet#authn",endpoint:"".concat(location.origin,"/fcl/authn"),id:a,identity:{address:a},provider:{address:null,name:"FCL Dev Wallet",icon:null,description:"For Local Development Only"}},{f_type:"Service",f_vsn:"1.0.0",type:"authz",uid:"fcl-dev-wallet#authz",endpoint:"".concat(location.origin,"/fcl/authz"),method:"IFRAME/RPC",identity:{address:a,keyId:Number(s)}},{f_type:"Service",f_vsn:"1.0.0",type:"user-signature",uid:"fcl-dev-wallet#user-sig",endpoint:"".concat(location.origin,"/fcl/user-sig"),method:"IFRAME/RPC",id:a,data:{addr:a,keyId:Number(s)},params:{}},{f_type:"Service",f_vsn:"1.0.0",type:"account-proof",method:"DATA",uid:"fcl-dev-wallet#account-proof",data:{f_type:"account-proof",f_vsn:"1.0.0",address:a,timestamp:d,appDomainTag:u,signatures:null!==(i=[b])&&void 0!==i?i:null}}],r.size&&v.push({f_type:"Service",f_vsn:"1.0.0",type:"open-id",uid:"fcl-dev-wallet#open-id",method:"data",data:_e({f_type:"OpenID",f_vsn:"1.0.0"},Ee([Le(Ie,r).size&&["profile",Ee([Fe(r,"name","name[".concat(a,"]")),Fe(r,"family_name","family_name[".concat(a,"]")),Fe(r,"given_name","given_name[".concat(a,"]")),Fe(r,"middle_name","middle_name[".concat(a,"]")),Fe(r,"nickname","nickname[".concat(a,"]")),Fe(r,"preferred_username","preferred_username[".concat(a,"]")),Fe(r,"profile","https://onflow.org"),Fe(r,"piture","https://https://avatars.onflow.org/avatar/".concat(a)),Fe(r,"website","https://onflow.org"),Fe(r,"gender","gender[".concat(a,"]")),Fe(r,"birthday","0000-".concat((new Date).getMonth()+1,"-").concat((new Date).getDate())),Fe(r,"zoneinfo","America/Vancouver"),Fe(r,"locale","en"),Fe(r,"updated_at",Date.now())])],Le(De,r).size&&["email",Ee([Fe(r,"email","".concat(a,"@example.com")),Fe(r,"email_verified",!0)])]]))}),localStorage.setItem("connectedAppConfig",JSON.stringify(o)),h.WalletUtils.sendMsgToFCL("FCL:VIEW:RESPONSE",{addr:a,services:v});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe={accountListItem:{marginX:-15,paddingX:15,height:90,display:"flex",alignItems:"center",flex:1},accountButtonContainer:{display:"flex",items:"center",alignItems:"center",justifyContent:"space-between",flex:1},accountImage:{marginRight:20},chooseAccountButton:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:66,paddingX:0,color:"colors.black",background:"transparent",border:0,textAlign:"left",fontSize:2,marginRight:10,textTransform:"initial",fontWeight:600,lineHeight:"1.3rem"},chooseAccountAddress:{fontSize:0,color:"gray.600"},chooseAccountFlow:{fontSize:0,color:"gray.600",display:"flex",alignItems:"center"},chooseAccountFlowLabel:{fontWeight:"normal",ml:2},chooseAccountButtonText:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},isNew:{textTransform:"uppercase",backgroundColor:"green",fontSize:11,fontWeight:"bold",borderRadius:14,position:"relative",top:"-2px",py:"1px",px:"7px",ml:2},manageAccountButton:{margin:0,padding:0,fontSize:1,fontWeight:"normal"}};function Ue(e){var t=e.account,n=e.onEditAccount,r=e.isNew,o=e.flowAccountAddress,c=e.flowAccountPrivateKey,i=e.avatarUrl,a=R().connectedAppConfig,d=a.config.app.title,u=(0,f.useState)(new Set(t.scopes)),p=u[0],h=u[1],g=se(t.address).data;(0,f.useEffect)((function(){h(new Set(t.scopes))}),[t.scopes]);return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{sx:Xe.accountListItem,children:(0,l.BX)("div",{sx:Xe.accountButtonContainer,children:[(0,l.BX)(pe.Z,{variant:"unstyled",sx:Xe.chooseAccountButton,onClick:function(){(function(e,t,n,r){return ze.apply(this,arguments)})(c,t,p,a).catch((function(e){return console.error(e)}))},children:[(0,l.tZ)(q.Z,{address:t.address,seed:d,sxStyles:Xe.accountImage,flowAccountAddress:o,avatarUrl:i}),(0,l.BX)("div",{sx:Xe.chooseAccountButtonText,children:[(0,l.BX)("div",{children:[t.label||t.address,r&&(0,l.tZ)("span",{sx:Xe.isNew,children:"New"})]}),(0,l.tZ)("code",{sx:Xe.chooseAccountAddress,children:t.address}),(0,l.BX)("code",{sx:Xe.chooseAccountFlow,children:[null!==g&&void 0!==g&&g.balance?ue(g.balance):"0",(0,l.tZ)("div",{sx:Xe.chooseAccountFlowLabel,children:"FLOW"})]})]})]}),(0,l.tZ)(s.kC,{ml:"auto",children:(0,l.tZ)(pe.Z,{variant:"link",onClick:function(){return n(t)},sx:Xe.manageAccountButton,children:"Manage"})})]})}),(0,l.tZ)(z.Ge.hr,{sx:{m:0}})]})}var Te={button:{textTransform:"none",paddingLeft:0,justifyContent:"flex-start",backgroundColor:"transparent",fontWeight:600},icon:{backgroundColor:"green",display:"flex",alignItems:"center",justifyContent:"center",width:50,height:50,borderRadius:50,marginRight:3,fontFamily:"inherit",fontWeight:"normal"}};function Ne(e){var t=e.onClick,n=e.disabled,r=e.children;return(0,l.BX)(pe.Z,{variant:"unstyled",size:"sm",onClick:t,sx:Te.button,block:!0,disabled:n,children:[(0,l.tZ)("div",{sx:Te.icon,children:(0,l.tZ)("img",{src:"/plus-icon.svg"})}),r]})}var We={accountCreated:{backgroundColor:"#00EF8B1A",border:"1px solid #00EF8B",textAlign:"center",py:10,px:3,mb:3},plusButtonContainer:{height:90,display:"flex",alignItems:"center"},footer:{lineHeight:1.7,color:"gray.400",fontSize:0}};function Me(e){var t=e.accounts,n=e.onEditAccount,r=e.createdAccountAddress,o=e.flowAccountAddress,c=e.flowAccountPrivateKey,i=e.avatarUrl,a=R().initError;return(0,l.BX)("div",{children:[(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)($,{description:"Select an existing account to log in or create a new account.",flowAccountAddress:o,avatarUrl:i})}),r&&(0,l.tZ)("div",{sx:We.accountCreated,children:(0,l.tZ)("b",{children:"Account Created"})}),a?(0,l.tZ)(ne,{errors:[a]}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(s.xu,{children:t.map((function(e){return(0,l.tZ)(Ue,{account:e,onEditAccount:n,isNew:e.address===r,flowAccountAddress:o,flowAccountPrivateKey:c,avatarUrl:i},e.address)}))}),(0,l.tZ)(s.xu,{sx:We.plusButtonContainer,children:(0,l.tZ)(Ne,{onClick:function(){return n({type:"ACCOUNT",label:O(t.length-1),scopes:[]})},children:"Create New Account"})}),(0,l.tZ)(z.Ge.hr,{sx:{mt:0,mb:4}})]})]})}var He=n(6520);function Ke(e){var t=e.error;return null==t?null:(0,L.jsx)("div",{children:(0,L.jsx)("pre",{children:t.stack})})}function qe(e){var t=e.flowAccountAddress,n=e.flowAccountPrivateKey,r=e.avatarUrl,o=(0,f.useState)(null),c=o[0],i=o[1],a=(0,He.Z)(),s=a.data,d=a.error,u=a.isLoading,p=(0,f.useState)(null),h=p[0],g=p[1];return!s&&d?(0,l.tZ)(Ke,{error:d}):!s||u?null:(0,l.tZ)(F,{children:(0,l.tZ)(ee.Z,{root:!0,children:c?(0,l.tZ)(Pe,{account:c,onSubmitComplete:function(e){i(null),e&&g(e)},onCancel:function(){return i(null)},flowAccountAddress:t,avatarUrl:r}):(0,l.tZ)("div",{sx:ee.W.body,children:(0,l.tZ)(Me,{accounts:s,onEditAccount:function(e){g(null),i(e)},createdAccountAddress:h,flowAccountAddress:t,flowAccountPrivateKey:n,avatarUrl:r})})})})}qe.getInitialProps=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,v.default)(),n=t.publicRuntimeConfig,e.abrupt("return",{flowAccountAddress:n.flowAccountAddress,flowAccountPrivateKey:n.flowAccountPrivateKey,avatarUrl:n.avatarUrl});case 2:case"end":return e.stop()}}),e)})));var Ge=qe},5244:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fcl/authn",function(){return n(8937)}])},8869:function(e){"use strict";e.exports='pub contract FCL {\n  pub let storagePath: StoragePath\n\n  pub struct Account {\n    pub let type: String\n    pub let address: Address\n    pub let keyId: Int\n    pub var label: String\n    pub var scopes: [String]\n\n    init(address: Address, label: String, scopes: [String]) {\n      self.type = "ACCOUNT"\n      self.address = address\n      self.keyId = 0\n      self.label = label\n      self.scopes = scopes\n    }\n\n    pub fun update(label: String, scopes: [String]) {\n      self.label = label\n      self.scopes = scopes\n    }\n  }\n\n  pub resource Root {\n    pub let key: [UInt8]\n    pub let accounts: {Address: Account}\n\n    init (_ key: String) {\n      self.key = key.decodeHex()\n      self.accounts = {}\n    }\n\n    pub fun add(_ acct: Account) {\n      self.accounts[acct.address] = acct\n    }\n\n    pub fun update(address: Address, label: String, scopes: [String]) {\n      let acct = self.accounts[address]\n      acct!.update(label: label, scopes: scopes)\n      self.accounts[address] = acct\n    }\n  }\n\n  pub fun accounts(): {Address: Account} {\n    return self.account.borrow<&Root>(from: self.storagePath)!.accounts\n  }\n\n  pub fun getServiceKey(): [UInt8] {\n    return self.account.borrow<&Root>(from: self.storagePath)!.key\n  }\n\n  pub fun new(label: String, scopes: [String], address: Address?): AuthAccount {\n    let acct = AuthAccount(payer: self.account)\n    acct.addPublicKey(self.getServiceKey())\n\n    self.account\n      .borrow<&Root>(from: self.storagePath)!\n      .add(Account(address: address ?? acct.address, label: label, scopes: scopes))\n\n    return acct\n  }\n\n  pub fun update(address: Address, label: String, scopes: [String]) {\n    self.account.borrow<&Root>(from: self.storagePath)!\n      .update(address: address, label: label, scopes: scopes)\n  }\n\n  init (key: String, initAccountsLabels: [String]) {\n    self.storagePath = /storage/FCL_DEV_WALLET\n    self.account.save(<- create Root(key), to: self.storagePath)\n\n    self.new(label: initAccountsLabels[0], scopes: [], address: self.account.address)\n    var acctInitIndex = 1\n    while acctInitIndex < initAccountsLabels.length {\n      self.new(label: initAccountsLabels[acctInitIndex], scopes: [], address: nil)\n      acctInitIndex = acctInitIndex + 1\n    }\n  }\n}\n'},2390:function(e){"use strict";e.exports='transaction(code: String, key: String, initAccountsLabels: [String]) {\n  prepare(acct: AuthAccount) {\n    acct.contracts.add(name: "FCL", code: code.decodeHex(), key: key, initAccountsLabels: initAccountsLabels)\n  }\n}\n'}},function(e){e.O(0,[435,495,209,459,510,774,888,179],(function(){return t=5244,e(e.s=t);var t}));var t=e.O();_N_E=t}]);